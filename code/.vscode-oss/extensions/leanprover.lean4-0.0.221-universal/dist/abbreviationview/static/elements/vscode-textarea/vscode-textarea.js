var __decorate=this&&this.__decorate||function(e,t,a,o){var r,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,a):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,o);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(i<3?r(s):i>3?r(t,a,s):r(t,a))||s);return i>3&&s&&Object.defineProperty(t,a,s),s};import{html,LitElement}from"lit";import{customElement,property,query,state}from"lit/decorators.js";import{ifDefined}from"lit/directives/if-defined.js";import{classMap}from"lit/directives/class-map.js";import{styleMap}from"lit/directives/style-map.js";import{VscElement}from"../includes/VscElement.js";import styles from"./vscode-textarea.styles.js";let VscodeTextarea=class extends VscElement{set value(e){this._value=e,this._internals.setFormValue(e)}get value(){return this._value}get wrappedElement(){return this._textareaEl}get form(){return this._internals.form}get type(){return"textarea"}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}set minlength(e){this.minLength=e}get minlength(){return this.minLength}set maxlength(e){this.maxLength=e}get maxlength(){return this.maxLength}constructor(){super(),this.autocomplete=void 0,this.autofocus=!1,this.defaultValue="",this.disabled=!1,this.invalid=!1,this.label="",this.maxLength=void 0,this.minLength=void 0,this.rows=void 0,this.cols=void 0,this.name=void 0,this.placeholder=void 0,this.readonly=!1,this.resize="none",this.required=!1,this.spellcheck=!1,this.monospace=!1,this._value="",this._textareaPointerCursor=!1,this._shadow=!1,this._internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>{this._textareaEl.checkValidity(),this._setValidityFromInput(),this._internals.setFormValue(this._textareaEl.value)}))}updated(e){const t=["maxLength","minLength","required"];for(const a of e.keys())if(t.includes(String(a))){this.updateComplete.then((()=>{this._setValidityFromInput()}));break}}formResetCallback(){this.value=this.defaultValue}formStateRestoreCallback(e,t){this.updateComplete.then((()=>{this._value=e}))}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}_setValidityFromInput(){this._internals.setValidity(this._textareaEl.validity,this._textareaEl.validationMessage,this._textareaEl)}_dataChanged(){this._value=this._textareaEl.value,this._internals.setFormValue(this._textareaEl.value)}_handleChange(e){this._dataChanged(),this._setValidityFromInput(),this.dispatchEvent(new Event("change")),this.dispatchEvent(new CustomEvent("vsc-change",{detail:{data:this.value,originalEvent:e}}))}_handleInput(e){this._dataChanged(),this._setValidityFromInput(),this.dispatchEvent(new CustomEvent("vsc-input",{detail:{data:e.data,originalEvent:e}}))}_handleMouseMove(e){if(this._textareaEl.clientHeight>=this._textareaEl.scrollHeight)return void(this._textareaPointerCursor=!1);const t=this._textareaEl.getBoundingClientRect(),a=e.clientX;this._textareaPointerCursor=a>=t.left+t.width-14-2}_handleScroll(){this._shadow=this._textareaEl.scrollTop>0}render(){return html`
      <div
        class=${classMap({shadow:!0,visible:this._shadow})}
      ></div>
      <textarea
        autocomplete=${ifDefined(this.autocomplete)}
        ?autofocus=${this.autofocus}
        ?disabled=${this.disabled}
        aria-label=${this.label}
        id="textarea"
        class=${classMap({monospace:this.monospace,"cursor-pointer":this._textareaPointerCursor})}
        maxlength=${ifDefined(this.maxLength)}
        minlength=${ifDefined(this.minLength)}
        rows=${ifDefined(this.rows)}
        cols=${ifDefined(this.cols)}
        name=${ifDefined(this.name)}
        placeholder=${ifDefined(this.placeholder)}
        ?readonly=${this.readonly}
        style=${styleMap({resize:this.resize})}
        ?required=${this.required}
        spellcheck=${this.spellcheck}
        @change=${this._handleChange}
        @input=${this._handleInput}
        @mousemove=${this._handleMouseMove}
        @scroll=${this._handleScroll}
        .value=${this._value}
      ></textarea>
    `}};VscodeTextarea.styles=styles,VscodeTextarea.formAssociated=!0,VscodeTextarea.shadowRootOptions={...LitElement.shadowRootOptions,delegatesFocus:!0},__decorate([property()],VscodeTextarea.prototype,"autocomplete",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"autofocus",void 0),__decorate([property({attribute:"default-value"})],VscodeTextarea.prototype,"defaultValue",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"disabled",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"invalid",void 0),__decorate([property({attribute:!1})],VscodeTextarea.prototype,"label",void 0),__decorate([property({type:Number})],VscodeTextarea.prototype,"maxLength",void 0),__decorate([property({type:Number})],VscodeTextarea.prototype,"minLength",void 0),__decorate([property({type:Number})],VscodeTextarea.prototype,"rows",void 0),__decorate([property({type:Number})],VscodeTextarea.prototype,"cols",void 0),__decorate([property()],VscodeTextarea.prototype,"name",void 0),__decorate([property()],VscodeTextarea.prototype,"placeholder",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"readonly",void 0),__decorate([property()],VscodeTextarea.prototype,"resize",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"required",void 0),__decorate([property({type:Boolean})],VscodeTextarea.prototype,"spellcheck",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeTextarea.prototype,"monospace",void 0),__decorate([property()],VscodeTextarea.prototype,"value",null),__decorate([query("#textarea")],VscodeTextarea.prototype,"_textareaEl",void 0),__decorate([state()],VscodeTextarea.prototype,"_value",void 0),__decorate([state()],VscodeTextarea.prototype,"_textareaPointerCursor",void 0),__decorate([state()],VscodeTextarea.prototype,"_shadow",void 0),VscodeTextarea=__decorate([customElement("vscode-textarea")],VscodeTextarea);export{VscodeTextarea};