var __decorate=this&&this.__decorate||function(e,t,s,a){var o,i=arguments.length,d=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,s):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,s,a);else for(var n=e.length-1;n>=0;n--)(o=e[n])&&(d=(i<3?o(d):i>3?o(t,s,d):o(t,s))||d);return i>3&&d&&Object.defineProperty(t,s,d),d};import{html}from"lit";import{customElement,property,queryAssignedElements}from"lit/decorators.js";import{classMap}from"lit/directives/class-map.js";import uniqueId from"../includes/uniqueId.js";import{VscElement}from"../includes/VscElement.js";import{VscodeTabHeader}from"../vscode-tab-header/index.js";import{VscodeTabPanel}from"../vscode-tab-panel/index.js";import styles from"./vscode-tabs.styles.js";let VscodeTabs=class extends VscElement{constructor(){super(),this.panel=!1,this.role="tablist",this.selectedIndex=0,this._tabHeaders=[],this._tabPanels=[],this._componentId="",this._tabFocus=0,this._componentId=uniqueId()}attributeChangedCallback(e,t,s){super.attributeChangedCallback(e,t,s),"selected-index"===e&&this._setActiveTab(),"panel"===e&&(this._tabHeaders.forEach((e=>e.panel=null!==s)),this._tabPanels.forEach((e=>e.panel=null!==s)))}_dispatchSelectEvent(){this.dispatchEvent(new CustomEvent("vsc-select",{detail:{selectedIndex:this.selectedIndex},composed:!0})),this.dispatchEvent(new CustomEvent("vsc-tabs-select",{detail:{selectedIndex:this.selectedIndex},composed:!0}))}_setActiveTab(){this._tabFocus=this.selectedIndex,this._tabPanels.forEach(((e,t)=>{e.hidden=t!==this.selectedIndex})),this._tabHeaders.forEach(((e,t)=>{e.active=t===this.selectedIndex}))}_focusPrevTab(){0===this._tabFocus?this._tabFocus=this._tabHeaders.length-1:this._tabFocus-=1}_focusNextTab(){this._tabFocus===this._tabHeaders.length-1?this._tabFocus=0:this._tabFocus+=1}_onHeaderKeyDown(e){"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||(e.preventDefault(),this._tabHeaders[this._tabFocus].setAttribute("tabindex","-1"),"ArrowLeft"===e.key?this._focusPrevTab():"ArrowRight"===e.key&&this._focusNextTab(),this._tabHeaders[this._tabFocus].setAttribute("tabindex","0"),this._tabHeaders[this._tabFocus].focus()),"Enter"===e.key&&(e.preventDefault(),this.selectedIndex=this._tabFocus,this._dispatchSelectEvent())}_moveHeadersToHeaderSlot(){const e=this._mainSlotElements.filter((e=>e instanceof VscodeTabHeader));e.length>0&&e.forEach((e=>e.setAttribute("slot","header")))}_onMainSlotChange(){this._moveHeadersToHeaderSlot(),this._tabPanels=this._mainSlotElements.filter((e=>e instanceof VscodeTabPanel)),this._tabPanels.forEach(((e,t)=>{e.ariaLabelledby=`t${this._componentId}-h${t}`,e.id=`t${this._componentId}-p${t}`,e.panel=this.panel})),this._setActiveTab()}_onHeaderSlotChange(){this._tabHeaders=this._headerSlotElements.filter((e=>e instanceof VscodeTabHeader)),this._tabHeaders.forEach(((e,t)=>{e.tabId=t,e.id=`t${this._componentId}-h${t}`,e.ariaControls=`t${this._componentId}-p${t}`,e.panel=this.panel,e.active=t===this.selectedIndex}))}_onHeaderClick(e){const t=e.composedPath().find((e=>e instanceof VscodeTabHeader));t&&(this.selectedIndex=t.tabId,this._setActiveTab(),this._dispatchSelectEvent())}render(){return html`
      <div
        class=${classMap({header:!0,panel:this.panel})}
        @click="${this._onHeaderClick}"
        @keydown=${this._onHeaderKeyDown}
      >
        <slot name="header" @slotchange=${this._onHeaderSlotChange}></slot>
        <slot name="addons"></slot>
      </div>
      <slot @slotchange=${this._onMainSlotChange}></slot>
    `}};VscodeTabs.styles=styles,__decorate([property({type:Boolean,reflect:!0})],VscodeTabs.prototype,"panel",void 0),__decorate([property({reflect:!0})],VscodeTabs.prototype,"role",void 0),__decorate([property({type:Number,reflect:!0,attribute:"selected-index"})],VscodeTabs.prototype,"selectedIndex",void 0),__decorate([queryAssignedElements({slot:"header"})],VscodeTabs.prototype,"_headerSlotElements",void 0),__decorate([queryAssignedElements()],VscodeTabs.prototype,"_mainSlotElements",void 0),VscodeTabs=__decorate([customElement("vscode-tabs")],VscodeTabs);export{VscodeTabs};