import{html}from"lit";export const startsWithPerTermSearch=(t,e)=>{const r={match:!1,ranges:[]},s=t.toLowerCase(),n=e.toLowerCase(),a=s.split(" ");let h=0;return a.forEach(((e,s)=>{if(s>0&&(h+=a[s-1].length+1),r.match)return;const c=e.indexOf(n),o=n.length;0===c&&(r.match=!0,r.ranges.push([h+c,Math.min(h+c+o,t.length)]))})),r};export const startsWithSearch=(t,e)=>{const r={match:!1,ranges:[]};return 0===t.toLowerCase().indexOf(e.toLowerCase())&&(r.match=!0,r.ranges=[[0,e.length]]),r};export const containsSearch=(t,e)=>{const r={match:!1,ranges:[]},s=t.toLowerCase().indexOf(e.toLowerCase());return s>-1&&(r.match=!0,r.ranges=[[s,s+e.length]]),r};export const fuzzySearch=(t,e)=>{const r={match:!1,ranges:[]};let s=0,n=0;const a=e.length-1,h=t.toLowerCase(),c=e.toLowerCase();for(let t=0;t<=a;t++){if(n=h.indexOf(c[t],s),-1===n)return{match:!1,ranges:[]};r.match=!0,r.ranges.push([n,n+1]),s=n+1}return r};export const filterOptionsByPattern=(t,e,r)=>{const s=[];return t.forEach((t=>{let n;switch(r){case"startsWithPerTerm":n=startsWithPerTermSearch(t.label,e);break;case"startsWith":n=startsWithSearch(t.label,e);break;case"contains":n=containsSearch(t.label,e);break;default:n=fuzzySearch(t.label,e)}n.match&&s.push({...t,ranges:n.ranges})})),s};const preventSpaces=t=>{const e=[];return" "===t?(e.push(html`&nbsp;`),e):(0===t.indexOf(" ")&&e.push(html`&nbsp;`),e.push(html`${t.trimStart().trimEnd()}`),t.lastIndexOf(" ")===t.length-1&&e.push(html`&nbsp;`),e)};export const highlightRanges=(t,e)=>{const r=[],s=e.length;return s<1?html`${t}`:(e.forEach(((n,a)=>{const h=t.substring(n[0],n[1]);0===a&&0!==n[0]&&r.push(...preventSpaces(t.substring(0,e[0][0]))),a>0&&a<s&&n[0]-e[a-1][1]!=0&&r.push(...preventSpaces(t.substring(e[a-1][1],n[0]))),r.push(html`<b>${preventSpaces(h)}</b>`),a===s-1&&n[1]<t.length&&r.push(...preventSpaces(t.substring(n[1],t.length)))})),r)};