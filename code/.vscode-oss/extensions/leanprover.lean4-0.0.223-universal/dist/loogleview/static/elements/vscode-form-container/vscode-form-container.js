var FormGroupLayout,__decorate=this&&this.__decorate||function(e,t,o,r){var s,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,r);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(a<3?s(i):a>3?s(t,o,i):s(t,o))||i);return a>3&&i&&Object.defineProperty(t,o,i),i};import{html}from"lit";import{customElement,property,query,queryAssignedElements}from"lit/decorators.js";import{VscElement}from"../includes/VscElement.js";import styles from"./vscode-form-container.styles.js";!function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"}(FormGroupLayout||(FormGroupLayout={}));const isTextInput=e=>["vscode-textfield","vscode-textarea"].includes(e.tagName.toLocaleLowerCase()),isSingleSelect=e=>"vscode-single-select"===e.tagName.toLocaleLowerCase(),isMultiSelect=e=>"vscode-multi-select"===e.tagName.toLocaleLowerCase(),isCheckbox=e=>"vscode-checkbox"===e.tagName.toLocaleLowerCase(),isRadio=e=>"vscode-radio"===e.tagName.toLocaleLowerCase();let VscodeFormContainer=class extends VscElement{constructor(){super(...arguments),this.breakpoint=490,this._responsive=!1,this._firstUpdateComplete=!1,this._resizeObserverCallbackBound=this._resizeObserverCallback.bind(this)}set responsive(e){this._responsive=e,this._firstUpdateComplete&&(e?this._activateResponsiveLayout():this._deactivateResizeObserver())}get responsive(){return this._responsive}get data(){return this._collectFormData()}_collectFormData(){const e=["vscode-textfield","vscode-textarea","vscode-single-select","vscode-multi-select","vscode-checkbox","vscode-radio"].join(","),t=this.querySelectorAll(e),o={};return t.forEach((e=>{if(!e.hasAttribute("name"))return;const t=e.getAttribute("name");t&&(isCheckbox(e)&&e.checked?o[t]=Array.isArray(o[t])?[...o[t],e.value]:[e.value]:isMultiSelect(e)?o[t]=e.value:isCheckbox(e)&&!e.checked?o[t]=Array.isArray(o[t])?o[t]:[]:isRadio(e)&&e.checked||isTextInput(e)||isSingleSelect(e)?o[t]=e.value:isRadio(e)&&!e.checked&&(o[t]=o[t]?o[t]:""))})),o}_toggleCompactLayout(e){this._assignedFormGroups.forEach((t=>{t.dataset.originalVariant||(t.dataset.originalVariant=t.variant);const o=t.dataset.originalVariant;e===FormGroupLayout.VERTICAL&&"horizontal"===o?t.variant="vertical":t.variant=o,t.querySelectorAll("vscode-checkbox-group, vscode-radio-group").forEach((t=>{t.dataset.originalVariant||(t.dataset.originalVariant=t.variant);const o=t.dataset.originalVariant;e===FormGroupLayout.HORIZONTAL&&o===FormGroupLayout.HORIZONTAL?t.variant="horizontal":t.variant="vertical"}))}))}_resizeObserverCallback(e){let t=0;for(const o of e)t=o.contentRect.width;const o=t<this.breakpoint?FormGroupLayout.VERTICAL:FormGroupLayout.HORIZONTAL;o!==this._currentFormGroupLayout&&(this._toggleCompactLayout(o),this._currentFormGroupLayout=o)}_activateResponsiveLayout(){this._resizeObserver=new ResizeObserver(this._resizeObserverCallbackBound),this._resizeObserver.observe(this._wrapperElement)}_deactivateResizeObserver(){this._resizeObserver?.disconnect(),this._resizeObserver=null}firstUpdated(){this._firstUpdateComplete=!0,this._responsive&&this._activateResponsiveLayout()}render(){return html`
      <div class="wrapper">
        <slot></slot>
      </div>
    `}};VscodeFormContainer.styles=styles,__decorate([property({type:Boolean,reflect:!0})],VscodeFormContainer.prototype,"responsive",null),__decorate([property({type:Number})],VscodeFormContainer.prototype,"breakpoint",void 0),__decorate([property({type:Object})],VscodeFormContainer.prototype,"data",null),__decorate([query(".wrapper")],VscodeFormContainer.prototype,"_wrapperElement",void 0),__decorate([queryAssignedElements({selector:"vscode-form-group"})],VscodeFormContainer.prototype,"_assignedFormGroups",void 0),VscodeFormContainer=__decorate([customElement("vscode-form-container")],VscodeFormContainer);export{VscodeFormContainer};