{"version":3,"file":"vscode-scrollable.js","sourceRoot":"","sources":["../../src/vscode-scrollable/vscode-scrollable.ts"],"names":[],"mappings":"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","sourcesContent":["import {html, nothing, TemplateResult} from 'lit';\nimport {\n  customElement,\n  property,\n  query,\n  queryAssignedElements,\n  state,\n} from 'lit/decorators.js';\nimport {classMap} from 'lit/directives/class-map.js';\nimport {styleMap} from 'lit/directives/style-map.js';\nimport {VscElement} from '../includes/VscElement.js';\nimport styles from './vscode-scrollable.styles.js';\n\n/**\n * @cssprop [--min-thumb-height=20px] - Scrollbar thumb minimum height\n * @cssprop --vscode-scrollbar-shadow\n * @cssprop --vscode-scrollbarSlider-background\n * @cssprop --vscode-scrollbarSlider-hoverBackground\n * @cssprop --vscode-scrollbarSlider-activeBackground\n */\n@customElement('vscode-scrollable')\nexport class VscodeScrollable extends VscElement {\n  static styles = styles;\n\n  @property({type: Boolean, reflect: true})\n  shadow = true;\n\n  @property({type: Boolean, reflect: true})\n  scrolled = false;\n\n  @property({type: Number, attribute: 'scroll-pos'})\n  set scrollPos(val: number) {\n    this._scrollableContainer.scrollTop = val;\n  }\n  get scrollPos(): number {\n    if (!this._scrollableContainer) {\n      return 0;\n    }\n\n    return this._scrollableContainer.scrollTop;\n  }\n\n  @property({type: Number, attribute: 'scroll-max'})\n  get scrollMax(): number {\n    if (!this._scrollableContainer) {\n      return 0;\n    }\n\n    return this._scrollableContainer.scrollHeight;\n  }\n\n  @state()\n  private _isDragging = false;\n\n  @state()\n  private _thumbHeight = 0;\n\n  @state()\n  private _thumbY = 0;\n\n  @state()\n  private _thumbVisible = false;\n\n  @state()\n  private _thumbFade = false;\n\n  @state()\n  private _thumbActive = false;\n\n  @query('.content')\n  private _contentElement!: HTMLDivElement;\n\n  @query('.scrollbar-thumb')\n  private _scrollThumbElement!: HTMLDivElement;\n\n  @query('.scrollable-container')\n  private _scrollableContainer!: HTMLDivElement;\n\n  @queryAssignedElements()\n  private _assignedElements!: NodeList;\n\n  private _hostResizeObserver!: ResizeObserver;\n  private _contentResizeObserver!: ResizeObserver;\n  private _scrollThumbStartY = 0;\n  private _mouseStartY = 0;\n  private _scrollbarVisible = true;\n  private _scrollbarTrackZ = 0;\n\n  connectedCallback(): void {\n    super.connectedCallback();\n\n    this._hostResizeObserver = new ResizeObserver(\n      this._resizeObserverCallback\n    );\n    this._contentResizeObserver = new ResizeObserver(\n      this._resizeObserverCallback\n    );\n\n    this.requestUpdate();\n\n    this.updateComplete.then(() => {\n      this._scrollableContainer.addEventListener(\n        'scroll',\n        this._onScrollableContainerScroll.bind(this)\n      );\n      this._hostResizeObserver.observe(this);\n      this._contentResizeObserver.observe(this._contentElement);\n    });\n\n    this.addEventListener('mouseover', this._onComponentMouseOverBound);\n    this.addEventListener('mouseout', this._onComponentMouseOutBound);\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n\n    this._hostResizeObserver.unobserve(this);\n    this._hostResizeObserver.disconnect();\n    this._contentResizeObserver.unobserve(this._contentElement);\n    this._contentResizeObserver.disconnect();\n\n    this.removeEventListener('mouseover', this._onComponentMouseOverBound);\n    this.removeEventListener('mouseout', this._onComponentMouseOutBound);\n  }\n\n  private _resizeObserverCallback = () => {\n    this._updateScrollbar();\n  };\n\n  private _updateScrollbar() {\n    const compCr = this.getBoundingClientRect();\n    const contentCr = this._contentElement.getBoundingClientRect();\n\n    if (compCr.height >= contentCr.height) {\n      this._scrollbarVisible = false;\n    } else {\n      this._scrollbarVisible = true;\n      this._thumbHeight = compCr.height * (compCr.height / contentCr.height);\n    }\n\n    this.requestUpdate();\n  }\n\n  private _zIndexFix() {\n    let highestZ = 0;\n\n    this._assignedElements.forEach((n) => {\n      if ('style' in n) {\n        const computedZIndex = window.getComputedStyle(n as HTMLElement).zIndex;\n        const isNumber = /([0-9-])+/g.test(computedZIndex);\n\n        if (isNumber) {\n          highestZ =\n            Number(computedZIndex) > highestZ\n              ? Number(computedZIndex)\n              : highestZ;\n        }\n      }\n    });\n\n    this._scrollbarTrackZ = highestZ + 1;\n    this.requestUpdate();\n  }\n\n  private _onSlotChange() {\n    this._zIndexFix();\n  }\n\n  private _onScrollThumbMouseDown(event: MouseEvent) {\n    const cmpCr = this.getBoundingClientRect();\n    const thCr = this._scrollThumbElement.getBoundingClientRect();\n\n    this._mouseStartY = event.screenY;\n    this._scrollThumbStartY = thCr.top - cmpCr.top;\n    this._isDragging = true;\n    this._thumbActive = true;\n\n    document.addEventListener('mousemove', this._onScrollThumbMouseMoveBound);\n    document.addEventListener('mouseup', this._onScrollThumbMouseUpBound);\n  }\n\n  private _onScrollThumbMouseMove(event: MouseEvent) {\n    const predictedPos =\n      this._scrollThumbStartY + (event.screenY - this._mouseStartY);\n    let nextPos = 0;\n    const cmpH = this.getBoundingClientRect().height;\n    const thumbH = this._scrollThumbElement.getBoundingClientRect().height;\n    const contentH = this._contentElement.getBoundingClientRect().height;\n\n    if (predictedPos < 0) {\n      nextPos = 0;\n    } else if (predictedPos > cmpH - thumbH) {\n      nextPos = cmpH - thumbH;\n    } else {\n      nextPos = predictedPos;\n    }\n\n    this._thumbY = nextPos;\n    this._scrollableContainer.scrollTop =\n      (nextPos / (cmpH - thumbH)) * (contentH - cmpH);\n  }\n\n  private _onScrollThumbMouseMoveBound =\n    this._onScrollThumbMouseMove.bind(this);\n\n  private _onScrollThumbMouseUp(event: MouseEvent) {\n    this._isDragging = false;\n    this._thumbActive = false;\n\n    const cr = this.getBoundingClientRect();\n    const {x, y, width, height} = cr;\n    const {pageX, pageY} = event;\n\n    if (pageX > x + width || pageX < x || pageY > y + height || pageY < y) {\n      this._thumbFade = true;\n      this._thumbVisible = false;\n    }\n\n    document.removeEventListener(\n      'mousemove',\n      this._onScrollThumbMouseMoveBound\n    );\n    document.removeEventListener('mouseup', this._onScrollThumbMouseUpBound);\n  }\n\n  private _onScrollThumbMouseUpBound = this._onScrollThumbMouseUp.bind(this);\n\n  private _onScrollableContainerScroll() {\n    const scrollTop = this._scrollableContainer.scrollTop;\n    this.scrolled = scrollTop > 0;\n\n    const cmpH = this.getBoundingClientRect().height;\n    const thumbH = this._scrollThumbElement.getBoundingClientRect().height;\n    const contentH = this._contentElement.getBoundingClientRect().height;\n\n    const overflown = contentH - cmpH;\n    const ratio = scrollTop / overflown;\n\n    this._thumbY = ratio * (cmpH - thumbH);\n  }\n\n  private _onComponentMouseOver() {\n    this._thumbVisible = true;\n    this._thumbFade = false;\n  }\n\n  private _onComponentMouseOverBound = this._onComponentMouseOver.bind(this);\n\n  private _onComponentMouseOut() {\n    if (!this._thumbActive) {\n      this._thumbVisible = false;\n      this._thumbFade = true;\n    }\n  }\n\n  private _onComponentMouseOutBound = this._onComponentMouseOut.bind(this);\n\n  render(): TemplateResult {\n    return html`\n      <div\n        class=\"scrollable-container\"\n        style=\"${styleMap({\n          'user-select': this._isDragging ? 'none' : 'auto',\n        })}\"\n      >\n        <div class=\"${classMap({shadow: true, visible: this.scrolled})}\"></div>\n        ${this._isDragging\n          ? html`<div class=\"prevent-interaction\"></div>`\n          : nothing}\n        <div\n          class=\"${classMap({\n            'scrollbar-track': true,\n            hidden: !this._scrollbarVisible,\n          })}\"\n          style=\"${styleMap({\n            'z-index': String(this._scrollbarTrackZ),\n          })}\"\n        >\n          <div\n            class=\"${classMap({\n              'scrollbar-thumb': true,\n              visible: this._thumbVisible,\n              fade: this._thumbFade,\n              active: this._thumbActive,\n            })}\"\n            style=\"${styleMap({\n              height: `${this._thumbHeight}px`,\n              top: `${this._thumbY}px`,\n            })}\"\n            @mousedown=${this._onScrollThumbMouseDown}\n          ></div>\n        </div>\n        <div class=\"content\">\n          <slot @slotchange=\"${this._onSlotChange}\"></slot>\n        </div>\n      </div>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'vscode-scrollable': VscodeScrollable;\n  }\n}\n"]}