var __decorate=this&&this.__decorate||function(e,t,o,i){var s,a=arguments.length,d=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,o,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(d=(a<3?s(d):a>3?s(t,o,d):s(t,o))||d);return a>3&&d&&Object.defineProperty(t,o,d),d};import{html,LitElement}from"lit";import{customElement,property,state,query}from"lit/decorators.js";import{classMap}from"lit/directives/class-map.js";import{FormButtonWidgetBase}from"../includes/form-button-widget/FormButtonWidgetBase.js";import{LabelledCheckboxOrRadioMixin}from"../includes/form-button-widget/LabelledCheckboxOrRadio.js";import styles from"./vscode-radio.styles.js";let VscodeRadio=class extends(LabelledCheckboxOrRadioMixin(FormButtonWidgetBase)){constructor(){super(),this.autofocus=!1,this.checked=!1,this.defaultChecked=!1,this.invalid=!1,this.name="",this.value="",this.disabled=!1,this.required=!1,this.role="radio",this.tabIndex=0,this._slottedText="",this._handleClick=()=>{this.disabled||this.checked||(this._checkButton(),this._handleValueChange(),this._dispatchCustomEvent(),this.dispatchEvent(new Event("change",{bubbles:!0})))},this._handleKeyDown=e=>{this.disabled||"Enter"!==e.key&&" "!==e.key||(e.preventDefault()," "!==e.key||this.checked||(this.checked=!0,this._handleValueChange(),this._dispatchCustomEvent(),this.dispatchEvent(new Event("change",{bubbles:!0}))),"Enter"===e.key&&this._internals.form?.requestSubmit())},this._internals=this.attachInternals()}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",this._handleKeyDown),this.addEventListener("click",this._handleClick),this._handleValueChange()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",this._handleKeyDown),this.removeEventListener("click",this._handleClick)}update(e){super.update(e),e.has("checked")&&this._handleValueChange(),e.has("required")&&this._handleValueChange()}get form(){return this._internals.form}get type(){return"radio"}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}formResetCallback(){this._getRadios().forEach((e=>{e.checked=e.defaultChecked})),this.updateComplete.then((()=>{this._handleValueChange()}))}formStateRestoreCallback(e,t){this.value===e&&""!==e&&(this.checked=!0)}_dispatchCustomEvent(){this.dispatchEvent(new CustomEvent("vsc-change",{detail:{checked:this.checked,label:this.label,value:this.value},bubbles:!0,composed:!0}))}_getRadios(){const e=this.getRootNode({composed:!0});if(!e)return[];const t=e.querySelectorAll(`vscode-radio[name="${this.name}"]`);return Array.from(t)}_uncheckOthers(e){e.forEach((e=>{e!==this&&(e.checked=!1)}))}_checkButton(){const e=this._getRadios();this.checked=!0,e.forEach((e=>{e!==this&&(e.checked=!1)}))}setComponentValidity(e){e?this._internals.setValidity({}):this._internals.setValidity({valueMissing:!0},"Please select one of these options.",this._inputEl)}_setGroupValidity(e,t){this.updateComplete.then((()=>{e.forEach((e=>{e.setComponentValidity(t)}))}))}_setActualFormValue(){let e="";e=this.checked?this.value?this.value:"on":null,this._internals.setFormValue(e)}_handleValueChange(){const e=this._getRadios(),t=e.some((e=>e.required));if(this._setActualFormValue(),this.checked)this._uncheckOthers(e),this._setGroupValidity(e,!0);else{const o=!!e.find((e=>e.checked)),i=t&&!o;this._setGroupValidity(e,!i)}}render(){const e=classMap({icon:!0,checked:this.checked}),t=classMap({"label-inner":!0,"is-slot-empty":""===this._slottedText});return html`
      <div class="wrapper">
        <input
          ?autofocus=${this.autofocus}
          id="input"
          class="radio"
          type="checkbox"
          ?checked="${this.checked}"
          value="${this.value}"
          tabindex=${this.tabIndex}
        />
        <div class="${e}"></div>
        <label for="input" class="label" @click="${this._handleClick}">
          <span class="${t}">
            ${this._renderLabelAttribute()}
            <slot @slotchange="${this._handleSlotChange}"></slot>
          </span>
        </label>
      </div>
    `}};VscodeRadio.styles=styles,VscodeRadio.formAssociated=!0,VscodeRadio.shadowRootOptions={...LitElement.shadowRootOptions,delegatesFocus:!0},__decorate([property({type:Boolean,reflect:!0})],VscodeRadio.prototype,"autofocus",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeRadio.prototype,"checked",void 0),__decorate([property({type:Boolean,reflect:!0,attribute:"default-checked"})],VscodeRadio.prototype,"defaultChecked",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeRadio.prototype,"invalid",void 0),__decorate([property({reflect:!0})],VscodeRadio.prototype,"name",void 0),__decorate([property()],VscodeRadio.prototype,"value",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeRadio.prototype,"disabled",void 0),__decorate([property({type:Boolean,reflect:!0})],VscodeRadio.prototype,"required",void 0),__decorate([property({reflect:!0})],VscodeRadio.prototype,"role",void 0),__decorate([property({type:Number,reflect:!0})],VscodeRadio.prototype,"tabIndex",void 0),__decorate([state()],VscodeRadio.prototype,"_slottedText",void 0),__decorate([query("#input")],VscodeRadio.prototype,"_inputEl",void 0),VscodeRadio=__decorate([customElement("vscode-radio")],VscodeRadio);export{VscodeRadio};